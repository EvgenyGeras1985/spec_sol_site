(window.serpWebpackJsonp=window.serpWebpackJsonp||[]).push([["48613c"],{"9wFV":function(e,t,a){"use strict";a.d(t,"a",(function(){return Le}));var c=a("oUqw"),n=a("9WoO"),l=a.n(n),i=a("xpsv"),o=a("1/1c"),s=a("eJro"),r=a("F0+J"),u=a("4Gwv"),d=a("cDcd"),b=a("gfRm"),j=a.n(b),m=a("1rKA"),O=a("DlOo"),h=a("mS9Q"),p=a("zy2/"),x=a("wQV3"),f=a("djHu"),g=a("sgPz"),v=Object(p.withBemMod)(Object(g.b)(),{theme:"normal"}),k=a("9Cu/"),C=a("Raiw"),B=a("3mCK"),w=Object(p.compose)(x.a,f.a,v,k.a)(C.a),F=Object(u.c)({desktop:function(e){var t=e.placeholder,a=e.email,n=e.state,l=e.hint,i=e.onChange,o=e.onBlur;return Object(c.jsx)(w,{className:B.o,value:a,type:"email",inputMode:"email",placeholder:t,state:n,hint:l,onChange:i,maxLength:100,onBlur:o,view:"default"})}},{file:"depot/components/Feedback/-Email/index.ts"}),E=a("amzm"),S=a("2i+B"),N=a("KMq6"),M=Object(S.a)(Object(N.a)(E.a));M.isBaobabNode=!0;var R,D=Object(u.c)({desktop:function(e){var t=e.url,a=e.children,n=e.logNode;return Object(c.jsx)(M,{className:B.p,url:t,logNode:n,theme:"normal",children:a})}},{file:"depot/components/Feedback/-Link/index.ts"}),I=a("KADe"),y=Object(u.c)({desktop:function(e){var t=e.children;return Object(c.jsx)("div",{className:B.s,children:t})}},{file:"depot/components/Feedback/-RadioboxList/index.ts"}),L=a("EHuH"),V=a("s6K7"),z=a("RRkw"),H=a("WZys"),T=a("8VqI"),W=Object(p.createClassNameModifier)(Object(T.b)(),{type:"arrowLongBack24Grey"}),A=Object(u.g)({desktop:W}),P=a("ev9A"),G=A(H.a),q=function(e){return Object(c.jsx)(G,{className:e,type:"arrowLongBack24Grey",size:"l"})},K=Object(V.a)(z.a),J=j()(P),Q=a("nAbZ"),U=j()(P),Z=j()(P),X=j()(P),Y=(R=L.a,function(e){var t=e.title,a=e.onDialogClose,n=e.onBackButtonClick,l=Object(c.jsx)(K,{className:B.g,view:"clear",onClick:n,icon:q,"aria-label":J("Назад")});return Object(c.jsx)(R,{title:t,iconBefore:l,onDialogClose:a})}),$=Object(u.c)({desktop:function(e){var t=e.email,a=e.changeEmail,n=e.onChangeSlide,l=e.reactBus,i=e.closeModal,o=function(){var e=Object(Q.e)(Object(d.useState)(!0),2),t=e[0],a=e[1],c=Object(d.useCallback)((function(){a(!t)}),[t,a]);return{checked:t,togglePrivacy:c}}(),s=o.checked,u=o.togglePrivacy,b=function(e){var t=Object(Q.e)(Object(d.useState)(void 0),2),a=t[0],c=t[1],n=Object(Q.e)(Object(d.useState)(""),2),l=n[0],i=n[1],o=Object(d.useCallback)((function(){return function(e){return e.indexOf("@")>0}(e)}),[e]),s=""===e;return{emailError:a,emailHint:l,updateEmailError:Object(d.useCallback)((function(){if(o()||s)return c(void 0),void i("");i(U("Неправильный адрес")),c("error")}),[o,s]),isEmailValid:o}}(t),j=b.emailError,p=b.emailHint,x=b.updateEmailError,f=b.isEmailValid,g=Object(d.useContext)(m.a),v=g.setSlide,k=g.prevSlide,C=Object(r.g)({reactBus:l}),w=Object(d.useCallback)((function(){i(),null==C||C()}),[i,C]),E=Object(r.p)(),S=function(e){var t=e.email,a=e.checked,c=e.changeEmail,n=e.isEmailValid,l=e.setSlide,i=e.onChangeSlide;return{getContinueBtnView:Object(d.useCallback)((function(){return t&&a?"action":"default"}),[t,a]),getContinueBtnStatus:Object(d.useCallback)((function(){return!a}),[a]),getContinueBtnText:Object(d.useCallback)((function(){return Z(t&&a?"Продолжить":"Пропустить")}),[t,a]),emailChanged:Object(d.useCallback)((function(e){c(e)}),[c]),changeSlide:Object(d.useCallback)((function(){(n()||""===t)&&a&&(l(t?B.e.WithEmailFeedback:B.e.WithoutEmailFeedback),null==i||i())}),[t,l,a,n,i])}}({email:t,checked:s,changeEmail:a,isEmailValid:f,setSlide:v,onChangeSlide:n}),N=S.getContinueBtnView,M=S.getContinueBtnStatus,R=S.getContinueBtnText,L=S.emailChanged,V=S.changeSlide,z=Object(c.jsxs)(c.Fragment,{children:[X("Оставьте почту"),",",Object(c.jsx)("br",{}),X("чтобы получить ответ")]}),H=Object(c.jsxs)(c.Fragment,{children:[X("Согласен с")," ",Object(c.jsx)(D,{url:Object(r.c)(),logNode:{name:"confidential"},children:X("политикой конфиденциальности ")})]});return Object(c.jsxs)("div",{className:B.l,children:[Object(c.jsx)(Y,{onDialogClose:w,onBackButtonClick:k,title:z}),Object(c.jsxs)(O.a,{children:[Object(c.jsx)(F,{email:t,placeholder:X("Адрес почты"),onChange:L,onBlur:x,state:j,hint:p}),Object(c.jsx)(y,{children:Object(c.jsx)(I.a,{label:H,size:"s",onChange:u,checked:s})}),Object(c.jsx)(h.a,{text:R(),view:N(),disabled:M(),onClick:V,logNode:{name:"email-submit"},buttonRef:E})]})]})}},{file:"depot/components/Feedback/-EmailView/index.ts"}),_=a("FOqd"),ee=j()(P),te=Object(u.c)({desktop:function(e){var t=e.email,a=e.reactBus,n=e.closeModal,l=Object(d.useContext)(m.a).prevSlide,i=Object(r.p)(),o=Object(c.jsxs)(c.Fragment,{children:[ee("Мы ответим вам на почту"),Object(c.jsx)("br",{}),t]}),s=Object(r.g)({reactBus:a}),u=Object(d.useCallback)((function(){n(),null==s||s()}),[s,n]);return Object(c.jsxs)("div",{className:B.l,children:[Object(c.jsx)(L.a,{title:ee("Спасибо за обращение"),onDialogClose:u}),Object(c.jsxs)(O.a,{children:[Object(c.jsx)(_.a,{text:o}),Object(c.jsx)(h.a,{text:ee("Изменить почту"),view:"pseudo",onClick:l,logNode:{name:"change-email"}}),Object(c.jsx)(h.a,{text:ee("Закрыть"),view:"default",onClick:u,logNode:{name:"feedback-sended"},buttonRef:i})]})]})}},{file:"depot/components/Feedback/-WithEmailComplete/index.ts"}),ae=a("MHpE"),ce=a("+z0G"),ne=a("Q4S3"),le=a("E8am"),ie=a("bRPC"),oe=Object(p.withBemMod)(Object(ie.b)(),{size:"s"}),se=a("Yyxy"),re=Object(p.compose)(ne.a,Object(p.composeU)(le.a,oe))(se.b),ue=Object(u.c)({desktop:function(e){var t=e.value,a=e.options,n=e.size,l=e.onChange,i=Object(d.useCallback)((function(e){l&&l(parseInt(e.target.value))}),[l]);return Object(c.jsx)("div",{className:B.r,children:Object(c.jsx)(re,{value:t||"",options:a||[],size:n||"m",view:"default",onChange:i})})}},{file:"depot/components/Feedback/-Radiobox/index.ts"}),de=a("i36c"),be=a("a49L"),je=a("/TZ2"),me=a("w2mz"),Oe=a("wxd1"),he=a("ahRO"),pe=a("uRI3"),xe=a("hSHc"),fe=a("CGzu"),ge=a("CGds"),ve=a("TXuM"),ke=a("WgB8"),Ce=a("dH6s"),Be=Object(p.compose)(he.a,pe.a,xe.a)(z.a),we=Object(p.compose)(fe.a,ge.a,ve.a)(ke.a),Fe=Object(de.a)((function(){return Promise.all([a.e("46a2b3"),a.e("375325"),a.e("2ffe86"),a.e("31d463"),a.e("c1a5a7"),a.e("0180d3"),a.e("fc49a7")]).then(a.bind(null,"UwRI"))}),{resolveComponent:function(e){var t=e.Popup;return(0,e.withViewDefault)((0,e.withTargetAnchor)(t))}}),Ee=Object(p.compose)(Ce.a)(T.a),Se=new be.Registry({id:Object(je.b)()}).fill({Trigger:Be,Popup:Fe,Menu:we,Icon:Ee}),Ne=Object(p.compose)(Oe.a,Object(be.withRegistry)(Se),me.a)(je.a),Me=Object(u.c)({desktop:function(e){var t=e.options,a=e.value,n=e.onChange,l=e.onClick,i=e.placeholder;return Object(c.jsx)(Ne,{width:"max",maxHeight:200,className:B.t,value:a,view:"default",size:"m",placeholder:i,onClick:l,onChange:n,options:t})}},{file:"depot/components/Feedback/-Select/index.ts"}),Re=a("W0CS"),De=j()(P),Ie=j()(P),ye=Object(u.c)({desktop:function(e){var t,a,n=e.check,l=e.checkedItems,i=e.title,o=e.select,s=e.checkBoxLabels,u=e.files,b=e.changeFiles,j=e.uploadFile,p=e.removeFile,x=e.textareas,f=e.disableAttachField,g=void 0!==f&&f,v=e.skipEmail,k=void 0!==v&&v,C=e.reactBus,w=e.closeModal,F=Object(d.useContext)(m.a),E=F.nextSlide,S=F.setSlide,N=function(e,t,a){var c=Object(Q.e)(Object(d.useState)(void 0),2),n=c[0],l=c[1],i=Object(Q.e)(Object(d.useState)(""),2),o=i[0],s=i[1],r=Object(Q.e)(Object(d.useState)(!0),2),u=r[0],b=r[1],j=Object(Q.e)(Object(d.useState)(De("Расскажите подробнее о проблеме")),2),m=j[0],O=j[1],h=Object(d.useMemo)((function(){return e.some((function(e){return e.value&&e.value.length>0}))}),[e]),p=Object(d.useMemo)((function(){return t.findIndex((function(e){return e}))}),[t]),x=Object(d.useMemo)((function(){if(-1!==p)return a[p].minLengthValue}),[p,a]),f=Object(d.useMemo)((function(){var e=De("Короткий текст. Опишите подробнее, что именно произошло");return-1===p?e:a[p].minLengthErrorHint||e}),[p,a]),g=Object(d.useMemo)((function(){return e.map((function(e){return e.value})).join()}),[e]),v=Object(d.useMemo)((function(){return-1===p||!x||g.trim().length>=x}),[p,g,x]),k=Object(d.useCallback)((function(){var c;if(v||!h?(s(""),l(void 0)):x&&(s(f),l("error")),b(!h&&-1===p||!v),(t[t.length-1]&&e.length>0||p>-1&&a[p].needDescription)&&!h)return O(null!==(c=a[p].description)&&void 0!==c?c:De("Расскажите о проблеме или напишите предложения")),void b(!h);O(De("Расскажите подробнее о проблеме"))}),[v,h,x,p,t,e.length,a,f]);return Object(d.useEffect)((function(){k()}),[t,e,k]),{buttonDisabled:u,textareaPlaceholder:m,textareaHint:o,textareaState:n}}(x,l,s),M=N.buttonDisabled,R=N.textareaPlaceholder,D=N.textareaHint,I=N.textareaState,y=Object(r.g)({reactBus:C}),V=Object(d.useCallback)((function(){w(),null==y||y()}),[w,y]),z=l.findIndex((function(e){return e}));return Object(c.jsxs)("div",{className:B.l,children:[Object(c.jsx)(L.a,{title:i,onDialogClose:V}),Object(c.jsxs)(O.a,{children:[Number(null===(t=null==o?void 0:o.options)||void 0===t?void 0:t.length)>0?Object(c.jsx)(Me,Object(Q.a)({view:"default",size:"m",placeholder:Ie("В каком ответе ошибка?"),options:null!==(a=null==o?void 0:o.options)&&void 0!==a?a:[]},o)):null,(s.length>0||x.length>0)&&Object(c.jsxs)("div",{className:B.b,children:[s.length>0&&Object(c.jsx)(ue,{value:-1!==z?String(z):void 0,options:s.map((function(e,t){return{value:"".concat(t),label:e.value}})),onChange:n}),x.length>0&&Object(c.jsx)("div",{className:B.w,children:x.map((function(e){var t=e.name===e.placeholder?R:e.placeholder;return Object(c.jsx)(Re.a,Object(Q.a)({},e,{placeholder:"message"===e.name?t:e.placeholder,hint:"message"===e.name?D:e.hint,state:"message"===e.name?I:e.state}),e.name)}))})]}),g?null:Object(c.jsx)(ce.a,{files:u,onChange:b,holderText:Ie("Прикрепить фото или видео"),uploadFile:j,removeFile:p}),Object(c.jsx)(h.a,{text:Ie("Отправить"),view:"action",disabled:M,onClick:function(){k?S(B.e.WithoutEmailFeedback):E()},logNode:{name:"feedback-submit"}})]})]})}},{file:"depot/components/Feedback/-ReportView/index.ts"}),Le=function(e){var t=e.visible,a=e.metaFields,n=e.closeModal,u=e.scopeRef,d=e.checkBoxLabels,b=e.title,j=e.selectParams,m=e.feature,O=e.reactBus,h=e.uploadScreenshot,p=e.textareas,x=void 0===p?["message"]:p,f=e.disableAttachField,g=e.additionalFields,v=e.skipEmail,k=e.restoreFocusRef,C=e.shouldResetOnClose,w=e.className,F=e.placeholders,E=Object(r.j)(),S=E.email,N=E.resetEmail,M=E.changeEmail,R=Object(r.m)(d),D=R.check,I=R.checkedItems,y=R.setCheckedItems,L=Object(r.o)(),V=L.files,z=L.setFiles,H=Object(r.n)(x,F),T=H.props,W=H.resetTextareas,A=Object(r.r)((null==j?void 0:j.items)||[]),P=Object(i.useBaobab)(B.m),G=P.node,q=P.nextContext,K=P.BaobabProvider,J="FeedbackDrawerTitleForA11y-"+G.id,Q=Object(r.f)({metaFields:a,email:S,checkedItems:I,checkBoxLabels:d,feature:m,select:j&&{fieldName:j.fieldName,value:j.items[parseInt(A.value)]},uploadScreenshot:h,textareas:T,reactBus:O,additionalFields:g}),U=Q.createTicketIfNeed,Z=Q.upload,X=Q.removeFile,Y=Q.ajaxWrapper,_=Q.setAttachments,ee=Q.onChangeEmailView,ce=Object(r.k)({resetTextareas:W,resetEmail:N,ajaxWrapper:Y,setAttachments:_,setCheckedItems:y,checkBoxLabels:d,createTicketIfNeed:U,closeModal:n,setFiles:z,viewsCount:2,shouldResetOnClose:C}),ne=ce.resetModal,le=ce.closeDialog,ie=ce.currentDialog,oe=ce.setCurrentDialog;Object(r.h)({callback:le,reactBus:O}),Object(r.q)({callback:ne,reactBus:O});var se=l()((function(){O?n():le()}));return Object(c.jsx)(K,{value:q,children:Object(c.jsx)(r.a,{value:J,children:Object(c.jsx)(o.a,{scope:u,visible:t,restoreFocusRef:k,onClose:function(){var e,t;se(),C&&ne(),null===(t=null==O?void 0:(e=O()).emit)||void 0===t||t.call(e,B.a.CLOSE)},className:w,children:Object(c.jsx)("div",{"aria-live":"polite",children:Object(c.jsxs)(s.a,{currentDialog:ie,setCurrentDialog:oe,children:[Object(c.jsx)(ye,{title:b||Object(r.d)(),files:V,changeFiles:z,check:D,checkedItems:I,checkBoxLabels:d,uploadFile:Z,removeFile:X,select:A,textareas:T,disableAttachField:f,skipEmail:v,reactBus:O,closeModal:se}),Object(c.jsx)($,{email:S,changeEmail:M,onChangeSlide:ee,reactBus:O,closeModal:se}),Object(c.jsx)(te,{email:S,reactBus:O,closeModal:se}),Object(c.jsx)(ae.a,{reactBus:O,closeModal:se})]})})})})})}}}]);