window.Ya.define&&window.Ya.define("app-foot-extrender",[],(function(){var a=function(){var a={};function e(e){var n=e.pcodeParams,t=e.renderParams,d=e.callbacks,r=e.renderWhen,i=n.renderTo;"loading"!==n.blockId&&(a[i]=a[i]||{isSubscribed:!1,events:[],state:{},callbacks:d||{}},(r||Promise.resolve()).then((function(){!function(a,e){var n=a.renderTo;window.yaContextCb=window.yaContextCb||[],window.yaContextCb.push((function(){var t,d;if(document.getElementById(n)){var r=Object.assign({},a,{onClick:o(n,"onClick",void 0),onRender:o(n,"onRender",void 0),onHide:o(n,"onHide",void 0),onError:o(n,"onError",void 0),altCallback:o(n,"altCallback",void 0),preClick:o(n,"preClick",{urlParams:{}})}),i=(null==e?void 0:e.method)||"render";null===(d=null===(t=window.Ya.Context)||void 0===t?void 0:t.AdvManager)||void 0===d||d[i](r)}}))}(n,t)})))}function n(e){return a[e]}function o(a,e,o){return function(t){var d=n(a);if(!d)return o;d.isSubscribed||d.events.push({callbackName:e,args:t});var r=d.callbacks[e];return"function"==typeof r?r.call(null,t):o}}return{activate:e,deactivate:function(e){var o,t,d=n(e);d&&(d.state={},d.callbacks={},a[e]=void 0,null===(t=null===(o=window.Ya.Context)||void 0===o?void 0:o.AdvManager)||void 0===t||t.destroy({renderTo:e}))},subscribe:function(a,e){var o=n(a);o&&(o.events=o.events.reduce((function(a,n){var o=e[n.callbackName];return"function"==typeof o?o.call(null,n.args):a.push(n),a}),[]),Object.assign(o.callbacks,e),o.isSubscribed=!0)},get:n,watchQueue:function(a,n){var o=n||e;a.forEach(o),a.length=0,a.push=function(a){return o(a),0}}}}(),e=a.activate,n=a.subscribe,o=new Promise((function(a){var e,n;null===(n=(e=window.Ya).define)||void 0===n||n.call(e,"extRenderActivate",["baobab-logger","get-baobab-node"],(function(){a()}))}));function t(){var a;return null===(a=window.Ya.baobab)||void 0===a?void 0:a.logger}function d(a,e){if(e&&a.advData){var n=t();if(n){var o=n.createChild(e,{name:"banner",attrs:{type:"adv",subtype:a.subtype,externalId:{entity:"banner",id:a.advData.adId},event_hash:a.advData.eventHash,hit_log_id:a.advData.hitLogId,disableAutoBehaviour:!0}});if(n.attachNode(o),a.docId){var d=n.createChild(e,{name:"fake"});n.attachNode(d)}return o}}}function r(e,n){var o,r=null===(o=a.get(e))||void 0===o?void 0:o.state;if(r){var i=Array.isArray(n.advData)?n.advData[0]:void 0;if(r.advData===i)return!1;r.advData=i,r.needOwnResult&&(!r.docId||r.docId&&!r.resultBaobabNode)&&(r.resultBaobabNode=function(a){if(a.baobabNode&&a.advData){var e=t();if(e){var n=a.docId,o=e.createChild(a.baobabNode,{name:"$result",attrs:{type:n?"wizard":"adv",subtype:a.subtype,wizard_name:n?"adv-rsya":void 0,pos:a.position,externalId:{entity:n?"doc":"banner",id:n||a.advData.adId},event_hash:n?void 0:a.advData.eventHash,hit_log_id:n?void 0:a.advData.hitLogId,disableAutoBehaviour:!0}}),d=a.root.closest(".serp-item");return d&&d.setAttribute("data-log-node",o.id),e.attachNode(o),o}}}(r)),r.docId&&(r.bannerBaobabNode=d(r,r.resultBaobabNode)),r.needOwnResult||(r.bannerBaobabNode=d(r,r.baobabNode)),r.needSendLayoutCoords&&window.Ya.sendLayoutCoords()}}function i(a,e){return function(n){!1!==r(a,n)&&(null==e||e(n))}}function c(e){return function(){var n,o=null===(n=a.get(e))||void 0===n?void 0:n.state;if(o){var d=t();if(d)return function(a,e){var n=a.docId?a.bannerBaobabNode:a.resultBaobabNode||a.bannerBaobabNode||a.baobabNode;n&&a.advData&&n.logClick(a.advData,[void 0],{});var o={urlParams:{}},t=e.getLastEvent();return t&&(o.urlParams.baobab_event_id=t.id),o}(o,d)}}}a.activate=function(n){var t,d,r,l,u,v=n.pcodeParams,s=n.customParams,b=v.renderTo,f=Object.assign({},n);f.pcodeParams=Object.assign({},f.pcodeParams),f.pcodeParams.darkTheme=null!==(t=v.darkTheme)&&void 0!==t?t:"dark"===(null===(d=window.Ya)||void 0===d?void 0:d.skin),f.pcodeParams.lazyLoad=null!==(r=v.lazyLoad)&&void 0!==r&&r,f.pcodeParams.grab=null!==(l=v.grab)&&void 0!==l?l:function(a){var e;if(a)return e="t"+a+"\n",window.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(a,e){return String.fromCharCode(parseInt(e,16))})))}(null==s?void 0:s.rawGrab),v.lazyLoad&&(f.pcodeParams.lazyLoad.observedElement=function(a,e){if(e){var n=document.getElementById(a);if(n)return n.closest(".".concat(e))||void 0}}(b,null==s?void 0:s.observed)),f.callbacks=Object.assign(f.callbacks||{},{onRender:i(b,null===(u=f.callbacks)||void 0===u?void 0:u.onRender),preClick:c(b)}),f.renderWhen=o,function(n){var o,t,d=n.customParams,r=n.pcodeParams.renderTo;if(d){e(n);var i=document.getElementById(r);if(i){var c=null===(o=a.get(r))||void 0===o?void 0:o.state;if(c){var l=d.subtype,u=d.position,v=d.docId,s=d.needOwnResult,b=d.needSendLayoutCoords;Object.assign(c,{subtype:l,position:u,docId:v,needOwnResult:s,needSendLayoutCoords:b}),c.root=i,null===(t=n.renderWhen)||void 0===t||t.then((function(){var a,e;c.baobabNode=null===(e=null===(a=window.Ya.baobab)||void 0===a?void 0:a.getBaobabNode)||void 0===e?void 0:e.call(a,i)}))}}}}(f)},a.subscribe=function(a,e){var o=e.onRender;e.onRender=i(a,o),n(a,e)},window.Ya.extRenderFacade=a,a.watchQueue(window.Ya.extRenderQueue,(function(e){a.activate(e)}))}));