(window.serpWebpackJsonp=window.serpWebpackJsonp||[]).push([["568ebb"],{Su1g:function(e,t,n){"use strict";n.r(t),n.d(t,"AdvReturn",(function(){return L}));var a,r,i=n("nAbZ"),o=n("oUqw"),c=n("cDcd"),s=n("faye"),u=n.n(s),d=n("uO80");!function(e){e[e.ORGANIC_ONLY_WITH_RENDER=1]="ORGANIC_ONLY_WITH_RENDER"}(a||(a={})),function(e){e.PREMIUM_AJAX="premium_ajax"}(r||(r={}));var l=[".serp-list_right_yes",".main__carousel",".entity-search",".EntityCard",".FactRelated",".main__portal-top",".ImagesTags",".EntityOffersOrganic",".EntityOffers",".EntityFeedbackFooter",".FuturisSearch",".Video",".CoveredPhone"].join(",");var p,v=function(e){var t=e.mode,n=e.isLoaded,r=Object(i.e)(Object(c.useState)(),2),o=r[0],s=r[1];return Object(c.useEffect)((function(){var e=function(e){if(!n){var r=function(e){var t=e.mode,n=e.event,r=n.target;if(r&&r.closest("a, .link, .Link")){var i=r.closest(".serp-item");if(i&&!r.closest(l)&&!i.classList.contains("serp-adv-sticky")&&!document.querySelector(".serp-cut")){if(t===a.ORGANIC_ONLY_WITH_RENDER){var o=window.Ya.adAttrName;if(o&&i.hasAttribute(o))return}if(!n.defaultPrevented)return i}}}({mode:t,event:e});s(r)}};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[t,n]),{snippet:o}},f=((p={})[r.PREMIUM_AJAX]=!1,p),b=function(e){var t=e.subtype;f[t]||(f[t]=!0,window.b(null,{nodeId:window.Ya.SerpContext.clckId,event:"tech",type:"adv_dynamic_show",data:{subtype:t}}))};var j=function(e){var t=e.subtype;Object(c.useEffect)((function(){if(!f[t]){var n=function(){!function(e){var t=e.subtype,n=e.hiddenHandler,a=e.visibleHandler;f[t]||("hidden"===document.visibilityState&&n(),"visible"===document.visibilityState&&a())}(e)};return document.addEventListener("visibilitychange",n),function(){document.removeEventListener("visibilitychange",n)}}}),[e,t])},m=n("Bh/V");function y(){var e=document.querySelector(".content__left")||document.querySelector(".main");if(e)return Object(m.c)(e)}var O=n("xpsv"),w=n("8MOd"),h=n("IaUl"),g=n("DnLa");function x(e){return"touch-phone"===window.Ya.SerpContext.platform?"".concat(e,"/touch"):e}var A=n("arj1"),_=n("7wkp"),S={name:"adv_ajax",attrs:{type:"adv",subtype:"premium_ajax"}},E={overflow:"hidden",height:0},R=function(e){var t=e.ajaxUpdater,n=e.snippet,a=e.subtype,r=e.testing,s=e.onLoad,u=e.onEmptyResponse,l=Object(c.useRef)(null),p=Object(c.useRef)(),v=Object(i.e)(Object(c.useState)(!1),2),f=v[0],j=v[1],m=Object(i.e)(Object(c.useState)(!1),2),y=m[0],w=m[1],x=Object(i.e)(Object(c.useState)(!1),2),R=x[0],C=x[1],k=Object(O.useBaobab)(S),I=k.nextContext,L=k.node,N=k.BaobabProvider,Y=Object(c.useCallback)((function(e){var t=p.current;t&&"reason"in t.signal&&t.abort(e)}),[]),M=Object(c.useCallback)((function(){return"function"!=typeof AbortController?null:(p.current=new AbortController,p.current.signal)}),[]);return Object(A.a)((function(){var n=l.current;if(n){var r=function(e){var t,n=e.snippet,a=e.foreverdata;if(n){var r=n.querySelector("a.OrganicTitle-Link[href]");if(r){var i,o=(i=new URL(r.href).hostname)?i.replace(/^www\./i,""):i,c=r.querySelector(".OrganicTitleContentSpan"),s={clicked_url:o,clicked_title:null!==(t=null==c?void 0:c.textContent)&&void 0!==t?t:void 0,shown:e.shown,bids:e.bids,replace_show_id:"1"};return a&&(s.foreverdata=a),s}}}(e);r&&(Y(),t.get({requestArguments:r,adapter:"adv",subtype:"ajax",ajaxSubtype:a,log:{event:h.a.append,node:n}},{onSuccess:function(e){var n;if(l.current){var a=e;t.validate(a)?(l.current.innerHTML=null===(n=a["ajax-updater"])||void 0===n?void 0:n.html,t.updateAssets(a),window.Ya.reactBus.emit("react:init"),window.BEM.DOM.init(),null==s||s(),j(!0)):u(a)}}},{signal:M()}).catch((function(){window.logSerpJsError({name:"ADV_AJAX",message:"AdvAjaxLoader fetch failed",catchType:"module:advajax"})})))}})),Object(d.a)((function(){Y(_.a)})),Object(c.useEffect)((function(){var e=l.current;if(e&&n&&f)if(y)R||(window.Ya.sendLayoutCoords(),C(!0));else{var t=e.querySelector(".serp-item");if(!t)return;var i=t.clientHeight;if(!i)return;var o=parseInt(window.getComputedStyle(n).marginBottom,10);if(t.style.marginBottom="".concat(o,"px"),"hidden"===document.visibilityState)return void w(!0);if(r)return w(!0),void b({subtype:a});var c=i+o;Object(g.a)({step:function(t){e.style.height="".concat(t*c,"px")},ease:g.b,duration:500}).then((function(){w(!0),b({subtype:a})}))}}),[R,f,y,n,a,r]),Object(o.jsx)(N,{value:I,children:Object(o.jsx)("div",{ref:l,"data-log-node":L.id,style:y?void 0:E})})},C=n("kGte");function k(e,t,n){var a=new URLSearchParams(window.location.search);for(var r in a.delete("ll"),a.delete("graph"),Object(C.a)(a),window.Ya.SerpContext.isAjaxRequestReplaceShowId&&a.set("replace_show_id","1"),a.set("ajax",JSON.stringify(function(e,t){var n=window.Ya.Serp,a=n.amt,r=n.bmt,i={"ajax-updater":Object.assign({},{block:"i-react-ajax-update",context:{},log:{},settings:{dataType:"json"}},e),bmt:r,amt:a};return i.log={event:t.event,parentId:"string"==typeof t.node?t.node:t.node.getAttribute("data-log-node")},i}(t,n))),e){var i=e[r];i&&a.set(r,i)}return a}var I=new WeakMap,L=function(e){var t=e.advAjax,n=Object(i.e)(Object(c.useState)(null),2),s=n[0],l=n[1],p=Object(i.e)(Object(c.useState)(!1),2),h=p[0],g=p[1],A=Object(i.e)(Object(c.useState)(null),2),_=A[0],S=A[1],E=t.subtype,C=t.stopAfterEmptyResponse,L=function(e){if(e===r.PREMIUM_AJAX)return R}(E),N=v({mode:a.ORGANIC_ONLY_WITH_RENDER,isLoaded:h}).snippet,Y=Object(c.useCallback)((function(){g(!0)}),[]),M=Object(c.useCallback)((function(e){var t;""===(null===(t=e["ajax-updater"])||void 0===t?void 0:t.html)&&C&&g(!0)}),[C]),q=Object(c.useCallback)((function(){N&&function(e){var t=e.snippet,n=e.setRoot;I.has(t)||I.set(t,document.createElement("div"));var a=I.get(t);t.insertAdjacentElement("afterend",a),n(a)}({snippet:N,setRoot:l,subtype:E})}),[N,E]),H=Object(c.useCallback)((function(){N&&s&&s.clientHeight&&b({subtype:E})}),[s,N,E]);if(j({subtype:E,hiddenHandler:q,visibleHandler:H}),Object(c.useEffect)((function(){_||S(function(e){var t=window.Ya.SerpContext,n={};t.enableRequestIdHeader&&(n["X-Request-Id"]=t.reqid);var a="".concat(window.location.origin).concat(e),r=window.Ya.createSerpFetch({url:a,baseParams:{yu:t.yandexuid},baseOptions:{headers:n},timeout:2e4,retryCount:3,retryInterval:1e3});return{get:function(e,t,n){var a=function(e){return{extraAjaxParams:{adapter:e.adapter,subtype:e.subtype,ajaxSubtype:e.ajaxSubtype,preventAjaxMethod:!0},log:e.log}}(e),i=k(e.requestArguments,a.extraAjaxParams,a.log);return r(i,t,n)},validate:function(e){if(!(e&&e.serp&&e.serp.params))return!1;var t=e["ajax-updater"];return!(!t||!t.html)},updateAssets:function(e){var t,n,a=e&&e.serp&&e.serp.params;window.Ya.Assets.moveCssOnAjax(),null===(n=null===(t=null==e?void 0:e.assets)||void 0===t?void 0:t.assets)||void 0===n||n.forEach(window.Ya.Assets.appendAjaxAsset),a&&window.Ya.Assets.updateMetadata(a)}}}(x(Boolean(t.foreverdata)?"/search/result":"/search/reask-suggest-banners")))}),[t.foreverdata,_]),Object(d.a)((function(){f[r.PREMIUM_AJAX]=!1})),!(s&&N&&L&&_))return null;var P=y(),T=function(e){if(e)return Object(m.c)(e)}(N);return P&&T?u.a.createPortal(Object(o.jsx)(O.BaobabAppendTo,{parentNode:P,logger:w.a,afterNode:T,children:Object(o.jsx)(L,Object(i.a)({},t,{onLoad:Y,onEmptyResponse:M,snippet:N,ajaxUpdater:_}))}),s):null}}}]);